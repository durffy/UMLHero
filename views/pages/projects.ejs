<%- include('../partials/header') %>
<div>
  <h1><%= pageTitle %></h1>
  <a type="submit" class="btn btn-primary" href="projects/create-project">Create Project</a>
</div>

<div class="input-group">
  <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search" />
  <button id="search-btn" class="btn btn-primary">Search</button>
</div>

<ul class="list-group">
  <% projects.forEach(function(project){%>

  <li class="list-group-item">
    <%= project.createdDate %>, <%= project.name %> , "<%= project.description %>"

    <a href="/projects/<%= project._id %>" class="btn btn-primary pull-right" role="button">Edit</a>
  </li>

  <%})%>
</ul>

<script>
  $(document).ready(function () {
    $('#search-btn').click(function () {
      if ($('#search').val()) {
        console.log('search has value');
        var search = $('#search').val();
      } else {
        console.log('search has no value');
        var search = '';
      }

      var settings = {
        url: 'http://localhost:3000/projects/search',
        method: 'GET',
        data: { search: search },
        timeout: 0,
      };

      $.ajax(settings).done(function (response) {});
    });
  });
</script>

<%- include('../partials/footer')%>
